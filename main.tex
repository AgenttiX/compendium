% Dokumentin määrittely
\documentclass[a4paper, finnish, 12pt, twoside]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[finnish]{babel}

% Käytettävät paketit
\usepackage{amsmath}	% Yhtälöt
\usepackage{amsfonts}	% ?
\usepackage{amssymb}	% Symbolit, \mathbb{}
\usepackage{array}		% Taulukot
\usepackage{bm}			% Vektorien lihavointi
\usepackage{cite}		% Lähdeviitteet
\usepackage{esint}		% Kiertointegraalit \oint \oiint
\usepackage{graphicx}	% Kuvat
\usepackage{hyperref}	% Hyperlinkit
\usepackage{pslatex}	% Parantaa pdf:n ulkonäköä
\usepackage{titletoc,tocloft} % For styling Table of Contents
\usepackage{titlesec}	% For styling \part headers
\usepackage{fancyhdr} % For custom header style
\usepackage{emptypage} % Clears unwanted artifacts from empty pages
% \usepackage{xkeyval}	% Parametrit omille komennoille

% Define Table of Contents style
\setcounter{tocdepth}{2}
\setlength{\cftsubsecindent}{4.5em}
\dottedcontents{section}[3em]{}{1.3em}{.6em}

% Define \part header style
\titleclass{\part}{top} % Make \part like a chapter
\titleformat{\part}
[display]
{\centering\normalfont\huge\bfseries}
{\titlerule[3pt]\vspace{3pt}\titlerule[1pt]\vspace{3pt}\MakeUppercase{\partname} \thepart}
{0pt}
{\huge\MakeUppercase}
[\vspace{-0.5em}\rule{\textwidth}{2pt}]

% Define the amount of whitespace to come after \part
\titlespacing*{\part}{0pt}{0pt}{40pt}

% Custom command for fetching the part name to the header
\newcommand*\parttitle{}
\let\origpart\part
\renewcommand*{\part}[2][]{%
	\ifx\\#1\\% optional argument not present?
		\origpart{#2}%
		\renewcommand*\parttitle{#2}%
	\else
		\origpart[#1]{#2}%
		\renewcommand*\parttitle{#1}%
	\fi
}

% Ehkäistään unicode non-breaking space -merkin aiheuttamat ongelmat
\DeclareUnicodeCharacter{00A0}{UNICODE_ERROR}

% Komentomäärittelyt
\newenvironment{taulukko}[1]{
	\begin{table}[!ht]
	\centering
	\caption{#1}
	\setlength{\extrarowheight}{10pt}
	\begin{tabular}{| l | >{$\displaystyle} l <{$} |} \hline
}{
	\end{tabular}
	\end{table}
}

\newenvironment{kaavataulukko}[1]{
	\begin{table}[!ht]
	\centering
	\caption{#1}
	\setlength{\extrarowheight}{10pt}
	\begin{tabular}{| l | >{$} l <{$} | l | >{$\displaystyle} l <{$} |} \hline
}{
	\end{tabular}
	\end{table}
}

\newenvironment{matriisi}{
	\setlength{\extrarowheight}{0pt}
	\begin{bmatrix}
}{
	\end{bmatrix}
}

\newcommand{\sisatulo}[2]{
	\langle \bm{#1}, \bm{#2} \rangle
}

\newenvironment{yhtaloryhma}{
	\setlength{\extrarowheight}{0pt}
	\begin{cases}
}{
	\end{cases}
}
%-----

% Metadata
\title{Linnunradan käsikirja teekkareille}
\author{Tampereen teekkarit}
\date{\the\day.\the\month.\the\year}


\begin{document}

% Otsikkosivu
\begin{titlepage}
\centering
{\huge Linnunradan käsikirja teekkareille \par}
% {\large Tampereen teekkarit \par}
{\the\day.\the\month.\the\year \par}
\vfill
\includegraphics{by-sa.eps}
\end{titlepage}

\pagenumbering{roman} % Start with roman numbers

% Esipuhe
Maailma on kaavoja ja taulukoita täynnä, mutta ne ovat olleet hajallaan useissa kirjoissa,
joista tiedon etsiminen on hidasta - varsinkin paperiversioista, joissa Ctrl+F ei luonnollisesti toimi.
Lisäksi monet niistä ovat tiukkojen tekijänoikeuksien ja kopiokieltojen alaisia,
vaikka tieto itsessään on vapaata. Nyt niille on vaihtoehto. Ole hyvä.

% Disclaimer
Tämä kirja on opiskelijaprojekti, joten emme voi ottaa vastuuta mahdollisista virheistä.
Toivommekin, että ilmoitat niistä vaikkapa GitHubin kautta, jotta voimme korjata ne.

% Tekijät
\begin{table*}[h!]
\centering
\begin{tabular}{ll}
Mika \textit{AgenttiX} Mäki		& Projektin perustaja \\
Daniel \textit{Ohems} Saarimäki \\
% Esimerkki					& Lisäykset
\end{tabular}
\end{table*}

% Lisenssi
\vfill
{
	\centering
	\href{https://creativecommons.org/licenses/by-sa/4.0/}{Creative Commons Attribution-ShareAlike 4.0 International}
	\par
}

% Table of Contents
\pagebreak
\tableofcontents
\vfill % Prevents TOC from expanding to full page height

% Define header
\pagestyle{fancy}
\fancyhead{} 
\fancyhead[LO,RE]{\MakeUppercase{\textit{\parttitle}}} 
\fancyhead[RO,LE]{\nouppercase{\textit{\rightmark}}}
\fancyfoot{}
\fancyfoot[C]{\thepage}

% Main content
\pagebreak
\pagenumbering{arabic} % Switch back to arabic page numbers
\include{matematiikka}
\include{fysiikka}
\include{kemia}
\include{tietotekniikka}

% Citations
\pagebreak
\renewcommand{\headrulewidth}{0pt} % Clear header line
\fancyhead{}									% Clear header
\setcounter{secnumdepth}{-1}	% Don't add numbers to chapters
\addcontentsline{toc}{part}{Viitteet}
\bibliography{lahdeluettelo}	% Citation source
\bibliographystyle{IEEEtran}	% Citation style


\end{document}
